<!-- ANGULAR COMPONENT -->
<app-phase-banner></app-phase-banner>

<h1 class="heading-xlarge">Offender assessment</h1>

<div class="grid-row">
  <div class="column-one-third">
    <app-sub-navigation></app-sub-navigation>
  </div>
  <div class="column-two-thirds">

    <h2 class="lede no-margin-top margin-bottom medium">Select the underlying issues that are relevant as motivators or drivers for the main offence</h2>

    <div class="notice">
      <i class="icon icon-important">
        <span class="visually-hidden">Warning</span>
      </i>
      <strong class="font-small">
        By not selecting an issue you are indicating it is not relevant
      </strong>
    </div>

    <p>&nbsp;</p>

    <form [formGroup]="reportForm" (ngSubmit)="onSubmit(reportForm)" novalidate>

      <!-- Loop through the "sections" specified in the controller: offender-assessment.component.ts -->
      <ng-template ngFor let-section [ngForOf]="sections" let-index="index">

        <div class="multiple-choice" [ngClass]="{ 'margin-top': index > 0 }">
          <input type="checkbox" role="checkbox" [id]="section.checkControl" [formControlName]="section.checkControl" value="true" />
          <label [attr.for]="section.checkControl" class="form-label-bold">{{section.checkLabel}}</label>
        </div>

        <div class="panel panel-border-narrow" [ngClass]="{ 'form-group-error': (reportForm.get(section.checkControl).touched || formError) && reportForm.get(section.checkControl).errors, 'js-hidden': !reportForm.get(section.checkControl).value }" [attr.aria-hidden]="!reportForm.get(section.checkControl).value">

          <!-- Angular component -->
          <app-text-entry [group]="reportForm" [name]="section.detailControl" [label]="section.detailLabel" [error]="formError" (onSaveContent)="saveContent(reportForm)"></app-text-entry>

        </div>

      </ng-template>

      <div class="clearfix"></div>

      <input class="button margin-top large" id="nextButton" type="submit" value="Save & continue" />

    </form>

  </div>
</div>
